{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"content container\"\n};\nconst _hoisted_2 = {\n  class: \"content__top\"\n};\nconst _hoisted_3 = {\n  class: \"content__row\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"content__title\"\n}, \" Каталог \", -1\n/* HOISTED */\n);\n\nconst _hoisted_5 = {\n  class: \"content__info\"\n};\nconst _hoisted_6 = {\n  class: \"content__catalog\"\n};\nconst _hoisted_7 = {\n  class: \"catalog\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"loader-wrapper\"\n};\nconst _hoisted_9 = {\n  key: 1\n};\nconst _hoisted_10 = {\n  key: 2\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_products_filter = _resolveComponent(\"products-filter\");\n\n  const _component_base_loader = _resolveComponent(\"base-loader\");\n\n  const _component_products_list = _resolveComponent(\"products-list\");\n\n  const _component_base_pagination = _resolveComponent(\"base-pagination\");\n\n  return _openBlock(), _createElementBlock(\"main\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"span\", _hoisted_5, \" Количество товаров: \" + _toDisplayString($options.total), 1\n  /* TEXT */\n  )])]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_products_filter, {\n    filters: $data.filters,\n    onChangeFilters: $options.setFilters\n  }, null, 8\n  /* PROPS */\n  , [\"filters\", \"onChangeFilters\"]), _createElementVNode(\"section\", _hoisted_7, [$options.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createVNode(_component_base_loader)])) : $options.isLoadingFailed ? (_openBlock(), _createElementBlock(\"h2\", _hoisted_9, \"Возникла ошибка при загрузке товаров. Попробуйте позже.\")) : !$options.products.length ? (_openBlock(), _createElementBlock(\"h2\", _hoisted_10, \"Нет товаров по вашему запросу. Попробуйте поискать что-нибудь другое!\")) : (_openBlock(), _createBlock(_component_products_list, {\n    key: 3,\n    products: $options.products\n  }, null, 8\n  /* PROPS */\n  , [\"products\"])), $options.products.length ? (_openBlock(), _createBlock(_component_base_pagination, {\n    key: 4,\n    page: $data.page,\n    perPage: $data.productsPerPage,\n    total: $options.total,\n    onChangePage: $options.setPage\n  }, null, 8\n  /* PROPS */\n  , [\"page\", \"perPage\", \"total\", \"onChangePage\"])) : _createCommentVNode(\"v-if\", true)])])]);\n}","map":{"version":3,"mappings":";;AACQA,OAAK,EAAC;;;AACLA,OAAK,EAAC;;;AAEJA,OAAK,EAAC;;;gCACTC,oBAEK,IAFL,EAEK;AAFDD,OAAK,EAAC;AAEL,CAFL,EAA2B,WAA3B,EAEA;AAAA;AAFA;;;AAGMA,OAAK,EAAC;;;AAMXA,OAAK,EAAC;;;AAGAA,OAAK,EAAC;;;;AACRA,OAAK,EAAC;;;;;;;;;;;;;;;;;uBAjBjBE,oBA2BO,MA3BP,cA2BO,CA1BLD,oBAUM,KAVN,cAUM,CARJA,oBAOM,KAPN,cAOM,CANJE,UAMI,EAHJF,oBAEO,MAFP,cAA4B,0BACNG,iBAAGC,cAAH,CADtB,EAC8B;AAAA;AAD9B,GAGI,CAPN,CAQI,CAVN,CA0BK,EAdLJ,oBAaM,KAbN,cAaM,CAZJK,aAAmFC,0BAAnF,EAAmF;AAAjEC,WAAO,EAAEC,aAAwD;AAA9CC,mBAAc,EAAEL;AAA8B,GAAnF;;AAAA,mCAYI,EAVJJ,oBASU,SATV,cASU,CAR0BI,oCAAlCH,oBAEM,KAFN,cAEM,CADJI,aAA2BK,sBAA3B,CACI,CAFN,KAGeN,0CAAfH,oBAA4F,IAA5F,EAA4FU,UAA5F,EAAgC,yDAAhC,MACgBP,kBAASQ,wBAAzBX,oBAA2G,IAA3G,EAA2GY,WAA3G,EAAiC,uEAAjC,oBACAC,aAA2DC,wBAA3D,EAA2D;UAAA;AAA3CC,YAAQ,EAAEZ;AAAiC,GAA3D;;AAAA,kBAGQ,EAD6FA,kBAASQ,wBAA9GE,aAAwIG,0BAAxI,EAAwI;UAAA;AAAtHC,QAAI,EAAEV,UAAgH;AAAzGW,WAAO,EAAEX,qBAAgG;AAA9EY,SAAK,EAAEhB,cAAuE;AAA/DiB,gBAAW,EAAEjB;AAAkD,GAAxI;;AAAA,sFACQ,CATV,CAUI,CAbN,CAcK,CA3BP","names":["class","_createElementVNode","_createElementBlock","_hoisted_4","_toDisplayString","$options","_createVNode","_component_products_filter","filters","$data","onChangeFilters","_component_base_loader","_hoisted_9","length","_hoisted_10","_createBlock","_component_products_list","products","_component_base_pagination","page","perPage","total","onChangePage"],"sourceRoot":"","sources":["D:\\задание\\final_examination_vue.js_dpo\\project\\mue\\src\\pages\\MainPage.vue"],"sourcesContent":["<template>\r\n  <main class=\"content container\">\r\n    <div class=\"content__top\">\r\n\r\n      <div class=\"content__row\">\r\n        <h1 class=\"content__title\">\r\n          Каталог\r\n        </h1>\r\n        <span class=\"content__info\">\r\n          Количество товаров: {{ total }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"content__catalog\">\r\n      <products-filter :filters=\"filters\" @change-filters=\"setFilters\"></products-filter>\r\n\r\n      <section class=\"catalog\">\r\n        <div class=\"loader-wrapper\" v-if=\"isLoading\">\r\n          <base-loader></base-loader>\r\n        </div>\r\n        <h2 v-else-if=\"isLoadingFailed\">Возникла ошибка при загрузке товаров. Попробуйте позже.</h2>\r\n        <h2 v-else-if=\"!products.length\">Нет товаров по вашему запросу. Попробуйте поискать что-нибудь другое!</h2>\r\n        <products-list :products=\"products\" v-else></products-list>\r\n\r\n        <base-pagination :page=\"page\" :perPage=\"productsPerPage\" :total=\"total\" @change-page=\"setPage\" v-if=\"products.length\"></base-pagination>\r\n      </section>\r\n    </div>\r\n  </main>\r\n</template>\r\n\r\n<script>\r\nimport ProductsFilter from '@/components/ProductsFilter.vue';\r\nimport ProductsList from '@/components/ProductsList.vue';\r\nimport BasePagination from '@/components/BasePagination.vue';\r\n\r\nexport default {\r\n  components: { ProductsFilter, ProductsList, BasePagination },\r\n  data() {\r\n    return {\r\n      page: 1,\r\n      productsPerPage: 6,\r\n      filters: {\r\n        filterPriceFrom: 0,\r\n        filterPriceTo: 0,\r\n        filterCategoryId: 0,\r\n        filterColorId: [],\r\n        filterMaterialId: [],\r\n        filterSeasonId: [],\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n    productsData() {\r\n      return this.$store.state.productsData;\r\n    },\r\n    products() {\r\n      return this.productsData ? this.productsData.items.map((product) => {\r\n        return {\r\n          ...product,\r\n          images: product.colors.flatMap((color) => color.gallery).filter((img) => img !== null)\r\n        }\r\n      }) : [];\r\n    },\r\n    total() {\r\n      return this.productsData ? this.productsData.pagination.total : 0;\r\n    },\r\n    isLoading() {\r\n      return this.$store.state.isLoading;\r\n    },\r\n    isLoadingFailed() {\r\n      return this.$store.state.isLoadingFailed;\r\n    },\r\n  },\r\n  methods: {\r\n    loadProducts() {\r\n      this.$store.dispatch('loadProducts', {\r\n        page: this.page,\r\n        limit: this.productsPerPage,\r\n        minPrice: this.filters.filterPriceFrom,\r\n        maxPrice: this.filters.filterPriceTo,\r\n        categoryId: this.filters.filterCategoryId,\r\n        materialIds: this.filters.filterMaterialId,\r\n        seasonIds: this.filters.filterSeasonId,\r\n        colorIds: this.filters.filterColorId\r\n      });\r\n    },\r\n    setFilters(filters) {\r\n      this.filters = filters;\r\n    },\r\n    setPage(page) {\r\n      this.page = page;\r\n    }\r\n  },\r\n  watch: {\r\n    filters() {\r\n      this.page = 1;\r\n      this.loadProducts();\r\n    },\r\n    page() {\r\n      this.loadProducts();\r\n    },\r\n    '$route'() {\r\n      this.loadProducts();\r\n    }\r\n  },\r\n  created() {\r\n    this.filters.filterCategoryId = this.$route.query.categoryId || 0;\r\n    this.loadProducts();\r\n  }\r\n}\r\n</script>"]},"metadata":{},"sourceType":"module"}