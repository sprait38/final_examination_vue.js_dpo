{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createBlock as _createBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"content container\"\n};\nconst _hoisted_2 = {\n  class: \"content__top\"\n};\nconst _hoisted_3 = {\n  class: \"breadcrumbs\"\n};\nconst _hoisted_4 = {\n  class: \"breadcrumbs__item\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" Каталог \");\n\nconst _hoisted_6 = {\n  class: \"breadcrumbs__item\"\n};\n\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" Корзина \");\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"li\", {\n  class: \"breadcrumbs__item\"\n}, [/*#__PURE__*/_createElementVNode(\"a\", {\n  class: \"breadcrumbs__link\"\n}, \" Оформление заказа \")], -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"content__row\"\n}, [/*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"content__title\"\n}, \" Оформление заказа \")], -1\n/* HOISTED */\n);\n\nconst _hoisted_10 = {\n  class: \"cart\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"loader-wrapper\"\n};\nconst _hoisted_12 = {\n  key: 1,\n  class: \"cart__field\"\n};\nconst _hoisted_13 = {\n  class: \"cart__data\"\n};\nconst _hoisted_14 = {\n  key: 0,\n  class: \"cart__options\"\n};\nconst _hoisted_15 = {\n  class: \"loader-wrapper\"\n};\nconst _hoisted_16 = {\n  key: 1,\n  class: \"cart__options\"\n};\n\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Возникла ошибка при загрузке товаров. Попробуйте позже.\", -1\n/* HOISTED */\n);\n\nconst _hoisted_18 = [_hoisted_17];\nconst _hoisted_19 = {\n  key: 2,\n  class: \"cart__options\"\n};\n\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"h3\", {\n  class: \"cart__title\"\n}, \"Доставка\", -1\n/* HOISTED */\n);\n\nconst _hoisted_21 = {\n  class: \"cart__options options\"\n};\nconst _hoisted_22 = {\n  key: 0,\n  class: \"form__error\"\n};\n\nconst _hoisted_23 = /*#__PURE__*/_createElementVNode(\"h3\", {\n  class: \"cart__title\"\n}, \"Оплата\", -1\n/* HOISTED */\n);\n\nconst _hoisted_24 = {\n  class: \"cart__options options\"\n};\nconst _hoisted_25 = {\n  key: 1,\n  class: \"form__error\"\n};\nconst _hoisted_26 = {\n  class: \"cart__block\"\n};\nconst _hoisted_27 = {\n  class: \"cart__orders\"\n};\nconst _hoisted_28 = {\n  class: \"cart__total\"\n};\n\nconst _hoisted_29 = /*#__PURE__*/_createTextVNode(\"Доставка: \");\n\nconst _hoisted_30 = /*#__PURE__*/_createTextVNode(\"Итого: \");\n\nconst _hoisted_31 = /*#__PURE__*/_createTextVNode(\" товара на сумму \");\n\nconst _hoisted_32 = [\"disabled\"];\nconst _hoisted_33 = {\n  key: 2,\n  class: \"cart__error form__error-block\"\n};\n\nconst _hoisted_34 = /*#__PURE__*/_createElementVNode(\"h4\", null, \"Заявка не отправлена!\", -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  const _component_base_loader = _resolveComponent(\"base-loader\");\n\n  const _component_base_form_text_field = _resolveComponent(\"base-form-text-field\");\n\n  const _component_base_form_textArea = _resolveComponent(\"base-form-textArea\");\n\n  const _component_base_form_radio_delivery = _resolveComponent(\"base-form-radio-delivery\");\n\n  const _component_base_form_radio_payment = _resolveComponent(\"base-form-radio-payment\");\n\n  return _openBlock(), _createElementBlock(\"main\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"ul\", _hoisted_3, [_createElementVNode(\"li\", _hoisted_4, [_createVNode(_component_router_link, {\n    class: \"breadcrumbs__link\",\n    to: {\n      name: 'main'\n    }\n  }, {\n    default: _withCtx(() => [_hoisted_5]),\n    _: 1\n    /* STABLE */\n\n  })]), _createElementVNode(\"li\", _hoisted_6, [_createVNode(_component_router_link, {\n    class: \"breadcrumbs__link\",\n    to: {\n      name: 'cart'\n    }\n  }, {\n    default: _withCtx(() => [_hoisted_7]),\n    _: 1\n    /* STABLE */\n\n  })]), _hoisted_8]), _hoisted_9]), _createElementVNode(\"section\", _hoisted_10, [_createElementVNode(\"form\", {\n    class: \"cart__form form\",\n    action: \"#\",\n    method: \"POST\",\n    onSubmit: _cache[7] || (_cache[7] = _withModifiers((...args) => $options.sendOrder && $options.sendOrder(...args), [\"prevent\"]))\n  }, [$options.isSending ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createVNode(_component_base_loader)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_createVNode(_component_base_form_text_field, {\n    title: \"ФИО\",\n    placeholder: \"Введите ваше имя\",\n    error: $options.formError.name,\n    modelValue: $data.formData.name,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.formData.name = $event)\n  }, null, 8\n  /* PROPS */\n  , [\"error\", \"modelValue\"]), _createVNode(_component_base_form_text_field, {\n    title: \"Адрес доставки\",\n    placeholder: \"Введите ваш адрес\",\n    error: $options.formError.address,\n    modelValue: $data.formData.address,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.formData.address = $event)\n  }, null, 8\n  /* PROPS */\n  , [\"error\", \"modelValue\"]), _createVNode(_component_base_form_text_field, {\n    title: \"Телефон\",\n    placeholder: \"Введите ваш телефон\",\n    error: $options.formError.phone,\n    modelValue: $data.formData.phone,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.formData.phone = $event)\n  }, null, 8\n  /* PROPS */\n  , [\"error\", \"modelValue\"]), _createVNode(_component_base_form_text_field, {\n    title: \"Email\",\n    placeholder: \"Введите ваш Email\",\n    error: $options.formError.email,\n    modelValue: $data.formData.email,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.formData.email = $event)\n  }, null, 8\n  /* PROPS */\n  , [\"error\", \"modelValue\"]), _createVNode(_component_base_form_textArea, {\n    title: \"Комментарии к заказу\",\n    placeholder: \"Ваши пожелания\",\n    error: $options.formError.comments,\n    modelValue: $data.formData.comments,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.formData.comments = $event)\n  }, null, 8\n  /* PROPS */\n  , [\"error\", \"modelValue\"])]), $options.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_createVNode(_component_base_loader)])])) : $options.isLoadingFailed ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, _hoisted_18)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [_hoisted_20, _createElementVNode(\"ul\", _hoisted_21, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.deliveries, delivery => {\n    return _openBlock(), _createBlock(_component_base_form_radio_delivery, {\n      key: delivery.id,\n      group: \"delivery\",\n      value: delivery.id,\n      title: delivery.title,\n      price: delivery.price,\n      modelValue: $data.formData.deliveryId,\n      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.formData.deliveryId = $event)\n    }, null, 8\n    /* PROPS */\n    , [\"value\", \"title\", \"price\", \"modelValue\"]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))]), $options.formError.deliveryTypeId ? (_openBlock(), _createElementBlock(\"span\", _hoisted_22, _toDisplayString($options.formError.deliveryTypeId), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true), _hoisted_23, _createElementVNode(\"ul\", _hoisted_24, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.payments, payment => {\n    return _openBlock(), _createBlock(_component_base_form_radio_payment, {\n      key: payment.id,\n      group: \"pay\",\n      title: payment.title,\n      value: payment.id,\n      modelValue: $data.formData.paymentId,\n      \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.formData.paymentId = $event)\n    }, null, 8\n    /* PROPS */\n    , [\"title\", \"value\", \"modelValue\"]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))]), $options.formError.paymentTypeId ? (_openBlock(), _createElementBlock(\"span\", _hoisted_25, _toDisplayString($options.formError.paymentTypeId), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true)]))])), _createElementVNode(\"div\", _hoisted_26, [_createElementVNode(\"ul\", _hoisted_27, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.cart, item => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      class: \"cart__order\",\n      key: item.id\n    }, [_createElementVNode(\"h3\", null, _toDisplayString(item.product.title), 1\n    /* TEXT */\n    ), _createElementVNode(\"b\", null, _toDisplayString(item.product.price) + \" ₽\", 1\n    /* TEXT */\n    ), _createElementVNode(\"h3\", null, \" Размер: \" + _toDisplayString(item.size.title), 1\n    /* TEXT */\n    ), _createElementVNode(\"span\", null, \" Артикул: \" + _toDisplayString(item.product.id), 1\n    /* TEXT */\n    )]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))]), _createElementVNode(\"div\", _hoisted_28, [_createElementVNode(\"p\", null, [_hoisted_29, _createElementVNode(\"b\", null, _toDisplayString($options.deliveryPrice ? `${$options.deliveryPrice} ₽` : 'бесплатно'), 1\n  /* TEXT */\n  )]), _createElementVNode(\"p\", null, [_hoisted_30, _createElementVNode(\"b\", null, _toDisplayString($options.totalQuantity), 1\n  /* TEXT */\n  ), _hoisted_31, _createElementVNode(\"b\", null, _toDisplayString($options.totalPrice) + \" ₽\", 1\n  /* TEXT */\n  )])]), _createElementVNode(\"button\", {\n    class: \"cart__button button button--primery\",\n    type: \"submit\",\n    disabled: $options.isLoading || $options.isLoadingFailed\n  }, \" Оформить заказ \", 8\n  /* PROPS */\n  , _hoisted_32)]), $options.orderErrorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_33, [_hoisted_34, _createElementVNode(\"p\", null, _toDisplayString($options.orderErrorMessage || 'Похоже произошла ошибка. Попробуйте отправить снова или перезагрузите страницу.'), 1\n  /* TEXT */\n  )])) : _createCommentVNode(\"v-if\", true)], 32\n  /* HYDRATE_EVENTS */\n  )])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","_hoisted_17","_createElementBlock","_createVNode","_component_router_link","to","name","_hoisted_8","_hoisted_9","action","method","onSubmit","$options","_component_base_loader","_component_base_form_text_field","title","placeholder","error","$data","$event","address","phone","email","_component_base_form_textArea","comments","_hoisted_18","_hoisted_20","_Fragment","_renderList","delivery","_createBlock","_component_base_form_radio_delivery","key","id","group","value","price","deliveryId","deliveryTypeId","_toDisplayString","_hoisted_23","payment","_component_base_form_radio_payment","paymentId","paymentTypeId","item","product","size","type","disabled","_hoisted_32","_hoisted_34"],"sourceRoot":"","sources":["D:\\задание\\final_examination_vue.js_dpo\\project\\mue\\src\\pages\\OrderPage.vue"],"sourcesContent":["<template>\r\n  <main class=\"content container\">\r\n    <div class=\"content__top\">\r\n      <ul class=\"breadcrumbs\">\r\n        <li class=\"breadcrumbs__item\">\r\n          <router-link class=\"breadcrumbs__link\" :to=\"{ name: 'main' }\">\r\n            Каталог\r\n          </router-link>\r\n        </li>\r\n        <li class=\"breadcrumbs__item\">\r\n          <router-link class=\"breadcrumbs__link\" :to=\"{ name: 'cart' }\">\r\n            Корзина\r\n          </router-link>\r\n        </li>\r\n        <li class=\"breadcrumbs__item\">\r\n          <a class=\"breadcrumbs__link\">\r\n            Оформление заказа\r\n          </a>\r\n        </li>\r\n      </ul>\r\n\r\n      <div class=\"content__row\">\r\n        <h1 class=\"content__title\">\r\n          Оформление заказа\r\n        </h1>\r\n      </div>\r\n    </div>\r\n\r\n    <section class=\"cart\">\r\n      <form class=\"cart__form form\" action=\"#\" method=\"POST\" @submit.prevent=\"sendOrder\">\r\n        <div class=\"loader-wrapper\" v-if=\"isSending\">\r\n          <base-loader></base-loader>\r\n        </div>\r\n        <div class=\"cart__field\" v-else>\r\n          <div class=\"cart__data\">\r\n            <base-form-text-field title=\"ФИО\" placeholder=\"Введите ваше имя\" :error=\"formError.name\"\r\n              v-model=\"formData.name\"></base-form-text-field>\r\n\r\n            <base-form-text-field title=\"Адрес доставки\" placeholder=\"Введите ваш адрес\" :error=\"formError.address\"\r\n              v-model=\"formData.address\"></base-form-text-field>\r\n\r\n            <base-form-text-field title=\"Телефон\" placeholder=\"Введите ваш телефон\" :error=\"formError.phone\"\r\n              v-model=\"formData.phone\"></base-form-text-field>\r\n\r\n            <base-form-text-field title=\"Email\" placeholder=\"Введите ваш Email\" :error=\"formError.email\"\r\n              v-model=\"formData.email\"></base-form-text-field>\r\n\r\n            <base-form-textArea title=\"Комментарии к заказу\" placeholder=\"Ваши пожелания\" :error=\"formError.comments\"\r\n              v-model=\"formData.comments\"></base-form-textArea>\r\n          </div>\r\n\r\n          <div class=\"cart__options\" v-if=\"isLoading\">\r\n            <div class=\"loader-wrapper\">\r\n              <base-loader></base-loader>\r\n            </div>\r\n          </div>\r\n          <div class=\"cart__options\" v-else-if=\"isLoadingFailed\">\r\n            <h2>Возникла ошибка при загрузке товаров. Попробуйте позже.</h2>\r\n          </div>\r\n          <div class=\"cart__options\" v-else>\r\n            <h3 class=\"cart__title\">Доставка</h3>\r\n            <ul class=\"cart__options options\">\r\n              <base-form-radio-delivery v-for=\"delivery in deliveries\" :key=\"delivery.id\" group=\"delivery\"\r\n                :value=\"delivery.id\" :title=\"delivery.title\" :price=\"delivery.price\"\r\n                v-model=\"formData.deliveryId\"></base-form-radio-delivery>\r\n            </ul>\r\n            <span class=\"form__error\" v-if=\"formError.deliveryTypeId\">{{ formError.deliveryTypeId }}</span>\r\n\r\n            <h3 class=\"cart__title\">Оплата</h3>\r\n            <ul class=\"cart__options options\">\r\n              <base-form-radio-payment v-for=\"payment in payments\" :key=\"payment.id\" group=\"pay\" :title=\"payment.title\"\r\n                :value=\"payment.id\" v-model=\"formData.paymentId\"></base-form-radio-payment>\r\n            </ul>\r\n            <span class=\"form__error\" v-if=\"formError.paymentTypeId\">{{ formError.paymentTypeId }}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"cart__block\">\r\n          <ul class=\"cart__orders\">\r\n            <li class=\"cart__order\" v-for=\"item in cart\" :key=\"item.id\">\r\n              <h3>{{ item.product.title }}</h3>\r\n              <b>{{ item.product.price }} ₽</b>\r\n              <h3>\r\n                Размер: {{ item.size.title }}\r\n              </h3>\r\n              <span>\r\n                Артикул: {{ item.product.id }}\r\n              </span>\r\n            </li>\r\n          </ul>\r\n\r\n          <div class=\"cart__total\">\r\n            <p>Доставка: <b>{{ deliveryPrice ? `${deliveryPrice} ₽` : 'бесплатно' }}</b></p>\r\n            <p>Итого: <b>{{ totalQuantity }}</b> товара на сумму <b>{{ totalPrice }} ₽</b></p>\r\n          </div>\r\n\r\n          <button class=\"cart__button button button--primery\" type=\"submit\" :disabled=\"isLoading || isLoadingFailed\">\r\n            Оформить заказ\r\n          </button>\r\n        </div>\r\n        <div class=\"cart__error form__error-block\" v-if=\"orderErrorMessage\">\r\n          <h4>Заявка не отправлена!</h4>\r\n          <p>\r\n            {{ orderErrorMessage || 'Похоже произошла ошибка. Попробуйте отправить снова или перезагрузите страницу.' }}\r\n          </p>\r\n        </div>\r\n      </form>\r\n    </section>\r\n  </main>\r\n</template>\r\n\r\n<script>\r\nimport BaseFormTextField from '@/components/BaseFormTextField.vue';\r\nimport BaseFormTextArea from '@/components/BaseFormTextArea.vue';\r\nimport BaseFormRadioDelivery from '@/components/BaseFormRadioDelivery.vue';\r\nimport BaseFormRadioPayment from '@/components/BaseFormRadioPayment.vue';\r\n\r\nexport default {\r\n  components: { BaseFormTextField, BaseFormTextArea, BaseFormRadioDelivery, BaseFormRadioPayment },\r\n  data() {\r\n    return {\r\n      formData: {\r\n        name: null,\r\n        address: null,\r\n        phone: null,\r\n        email: null,\r\n        comments: null,\r\n        paymentId: 1,\r\n        deliveryId: 1,\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n    cart() {\r\n      return this.$store.state.cartProductsData;\r\n    },\r\n    totalPrice() {\r\n      return this.$store.getters.cartTotalPrice + this.deliveryPrice;\r\n    },\r\n    totalQuantity() {\r\n      return this.$store.getters.cartTotalQuantity;\r\n    },\r\n    payments() {\r\n      return this.$store.state.paymentsData;\r\n    },\r\n    deliveries() {\r\n      return this.$store.state.deliveriesData;\r\n    },\r\n    deliveryPrice() {\r\n      return this.deliveries ? +this.deliveries.find(delivery => delivery.id === this.formData.deliveryId).price : 0;\r\n    },\r\n    formError() {\r\n      return this.$store.state.orderErrorInfo || {};\r\n    },\r\n    formErrorMessage() {\r\n      return this.$store.state.formErrorMessage;\r\n    },\r\n    orderErrorMessage() {\r\n      return this.$store.state.orderErrorMessage;\r\n    },\r\n    isSending() {\r\n      return this.$store.state.isSending;\r\n    },\r\n    isSendingFailed() {\r\n      return this.$store.state.isSendingFailed;\r\n    },\r\n    isLoading() {\r\n      return this.$store.state.isLoading;\r\n    },\r\n    isLoadingFailed() {\r\n      return this.$store.state.isLoadingFailed;\r\n    },\r\n  },\r\n  methods: {\r\n    sendOrder() {\r\n      this.$store.dispatch('sendOrder', {\r\n        name: this.formData.name,\r\n        address: this.formData.address,\r\n        phone: this.formData.phone,\r\n        email: this.formData.email,\r\n        deliveryTypeId: this.formData.deliveryId,\r\n        paymentTypeId: this.formData.paymentId,\r\n        comments: this.formData.comments\r\n      });\r\n    },\r\n    loadPayments() {\r\n      this.$store.dispatch('loadPayments', { deliveryTypeId: this.formData.deliveryId });\r\n    }\r\n  },\r\n  watch: {\r\n    'formData.deliveryId'() {\r\n      this.loadPayments();\r\n      this.formData.paymentId = null;\r\n    }\r\n  },\r\n  created() {\r\n    this.$store.dispatch('loadDeliveries');\r\n    this.loadPayments();\r\n  }\r\n}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}